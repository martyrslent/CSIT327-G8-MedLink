{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>User Dashboard</title>
  
  <link rel="stylesheet" href="{% static 'main/css/admin_dashboard.css' %}">
  
  <style>
    .card.full {
        display: block; /* Override flex from admin.css to allow table to be full-width */
    }
    .appointment-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }
    .appointment-table th, 
    .appointment-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    .appointment-table th {
        background-color: #f2f2f2;
        color: #333;
        font-weight: bold;
    }
    .appointment-table tr:hover {
        background-color: #f5f5f5;
    }
    .no-appointments {
        padding: 20px;
        text-align: center;
        color: #777;
    }
  </style>
</head>
<body>
  <div class="dashboard-wrap">
    
    <aside class="sidebar">
      <div class="logo">MedLink</div>
      <nav class="nav">
        <ul>
          <li><a href="{% url 'user_dashboard' %}">Dashboard</a></li>
          <li><a href="{% url 'user_profile' %}">Profile</a></li>
          <li><a href="{% url 'logout' %}">Logout</a></li>
        </ul>
      </nav>
    </aside>

    <main class="content">
      <h1 class="page-title">Welcome, {{ first_name|default:"User" }}!</h1>

      {% if messages %}
        {% for message in messages %}
            <p style="padding: 10px; background: #f8d7da; color: #721c24; border-radius: 5px; margin-bottom: 15px;">{{ message }}</p>
        {% endfor %}
      {% endif %}

      <!-- âœ… ADDED BOOK APPOINTMENT BUTTON -->
      <div style="margin-bottom: 20px; text-align: right;">
          <a href="{% url 'book_appointment' %}" class="btn" style="background-color: #28a745; padding: 10px 20px; color: white; text-decoration: none; border-radius: 5px; font-weight: bold;">
              + Book New Appointment
          </a>
      </div>

      <section class="bottom-row">
        <div class="card full">
          <h3>Your Upcoming Appointments</h3>
          
          {% if appointments %}
            <table class="appointment-table">
                <thead>
                    <tr>
                        <th>Doctor</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for appt in appointments %}
                        <tr>
                            <td>{{ appt.doctor_name }}</td>
                            <td>{{ appt.appointment_date }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
          {% else %}
            <p class="no-appointments">You have no scheduled appointment.</p>
          {% endif %}

        </div>
      </section>
    </main>

  </div>
</body>
</html>
