{% extends 'admin_base.html' %}

{% block content %}
<div class="main-content">
    <div class="header-wrapper">    
        <div class="header-title">
            <h2 style="font-family: 'Poppins', sans-serif; color: white; margin: 0; font-size: 3.0rem;">Patient Medical Profile</h2>
        </div>
    </div>

    <div class="stats-container" style="display: block; margin-top: 20px; font-family: 'Poppins', sans-serif;">
        <div class="card" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
            <div style="display: flex; align-items: center; gap: 20px;">
                {% if patient.profile_image %}
                    <img src="{{ patient.profile_image }}" alt="Profile" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">
                {% else %}
                    <div style="width: 100px; height: 100px; background: #f0f0f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: rgba(0, 0, 0, 0.6); box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);">No Img</div>
                {% endif %}
                <div>
                    <h3 style="margin: 0; color: rgba(0, 0, 0, 0.9); font-family: 'Poppins', sans-serif;">{{ patient.first_name }} {{ patient.last_name }}</h3>
                    <p style="margin: 5px 0; color: rgba(0, 0, 0, 0.7); font-family: 'Poppins', sans-serif;">{{ patient.email }}</p>
                    <p style="margin: 5px 0; font-family: 'Poppins', sans-serif;"><strong>Age:</strong> {{ patient.age|default:"N/A" }} | <strong>Gender:</strong> {{ patient.gender|default:"N/A" }}</p>
                </div>
            </div>
        </div>

        <div class="card" style="background: white; padding: 25px; border-radius: 15px; border-left: 5px solid #c0392b; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
            <h3 style="color: #c0392b; margin-top: 0; font-family: 'Poppins', sans-serif;">⚠️ Medical Alert Information</h3>
            
            <div style="margin-top: 15px;">
                <h4 style="margin-bottom: 5px; color: rgba(0, 0, 0, 0.9); font-family: 'Poppins', sans-serif;">Allergies</h4>
                <div style="background: rgba(53, 53, 53, 0.2); padding: 10px; border-radius: 10px; border: 1px solid #ddd;">
                    {% if patient.allergies %}
                        <p style="margin: 0; color: rgba(0, 0, 0, 0.8); font-family: 'Poppins', sans-serif;">{{ patient.allergies }}</p>
                    {% else %}
                        <em style="color: rgba(0, 0, 0, 0.6); font-family: 'Poppins', sans-serif;">No known allergies listed.</em>
                    {% endif %}
                </div>
            </div>

            <div style="margin-top: 15px;">
                <h4 style="margin-bottom: 5px; color: rgba(0, 0, 0, 0.9); font-family: 'Poppins', sans-serif;">Medical Conditions</h4>
                <div style="background: rgba(53, 53, 53, 0.2); padding: 10px; border-radius: 10px; border: 1px solid #ddd;">
                    {% if patient.medical_conditions %}
                        <p style="margin: 0; color: rgba(0, 0, 0, 0.8); font-family: 'Poppins', sans-serif;">{{ patient.medical_conditions }}</p>
                    {% else %}
                        <em style="color: rgba(0, 0, 0, 0.6); font-family: 'Poppins', sans-serif;">No medical conditions listed.</em>
                    {% endif %}
                </div>
            </div>  
        </div>

        <div class="card" style="background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
            <h3 style="color: rgba(0, 0, 0, 0.9); font-family: 'Poppins', sans-serif;">Current Appointment Details</h3>
            
            {% if current_appointment %}
                <div style="margin-top: 15px;">
                    <p style="color: rgba(0, 0, 0, 0.8); font-family: 'Poppins', sans-serif;"><strong>Appointment Date:</strong> {{ current_appointment.appointment_date }} at {{ current_appointment.appointment_time }}</p>
                    <hr style="border-color: rgba(0, 0, 0, 0.1);">
                    <h4 style="margin-bottom: 5px; color: rgba(0, 0, 0, 0.9); font-family: 'Poppins', sans-serif;">Reason for Visit:</h4>
                    <div style="background: rgba(53, 53, 53, 0.2); color: #333; padding: 15px; border-radius: 10px; font-family: 'Poppins', sans-serif;">
                        {{ current_appointment.reason_for_visit|linebreaks }}
                    </div>
                </div>
            {% else %}
                <p style="color: rgba(0, 0, 0, 0.6); font-family: 'Poppins', sans-serif;"><em>No specific appointment selected.</em></p>
            {% endif %}
        </div>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    .sidebar nav ul li a {
        color: #fff;
        text-decoration: none;
        padding: 14px 16px;
        border-radius: 12px;
        display: block;
        font-weight: 600;
        transition: background 0.3s ease, transform 0.25s ease, box-shadow 0.3s ease;
        background: linear-gradient(to right, #8d0000, #ad0505);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        position: relative;
        z-index: 1;
        font-family: 'Poppins', sans-serif;
    }
    .sidebar nav ul li a:hover,
    .sidebar nav ul li a:focus {
        background: linear-gradient(to right, #ad0505, #f55a00ff);
        color: #fff;
        transform: translateX(8px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        outline: none;
    }
    .sidebar nav ul li a.active {
        background: linear-gradient(to right, #d10000, #a30000);
        box-shadow: 0 10px 25px rgba(0,0,0,0.25);
        transform: translateX(4px);
    }
</style>
{% endblock %}
