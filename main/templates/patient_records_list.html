{% extends 'admin_dashboard.html' %}
{% load static %}

{% block title %}Patient Records List{% endblock %}

{% block content %}
<h1 class="page-title">All Patient Visit Records üßë‚Äç‚öïÔ∏è</h1>

<!-- üîé SEARCH BAR -->
<!-- Search Bar -->
<form method="get" style="margin-bottom: 20px; width: 100%; text-align: left;">
    <input 
        type="text" 
        name="search" 
        placeholder="Search patient name..." 
        value="{{ search }}" 
        style="
            padding: 10px; 
            width: 250px; 
            border: 1px solid #ccc; 
            border-radius: 6px;
        "
    >
    <button 
        type="submit" 
        style="
            padding: 10px 15px; 
            background-color: #007bff; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            font-weight: bold;
        "
    >
        Search
    </button>
</form>

<div class="appointment-table-container">
    {% if records %}
        <table>
            <thead>
                <tr>
                    <th>Record ID</th>
                    <th>Patient Name</th>
                    <th>Visit Date</th>
                    <th>Successful Visit</th>
                    <th>Doctor Notes</th>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                    <tr>
                        <td>{{ record.id }}</td>
                        <td>{{ record.user_id.first_name }} {{ record.user_id.last_name }}</td>
                        <td>{{ record.record_date|date:"Y-m-d" }}</td>
                        <td>
                            {% if record.successful_appointment_visit %}
                                ‚úÖ Yes
                            {% else %}
                                ‚ùå No
                            {% endif %}
                        </td>
                        <td>{{ record.doctor_notes|truncatechars:100 }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No patient records found.</p>
    {% endif %}
</div>
{% endblock %}
